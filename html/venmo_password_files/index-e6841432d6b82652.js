(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{67828:function(e,t,n){"use strict";var r=n(27812),i=n(67294),o=n(86010),a=n(22076),s=n(88391),c=n.n(s),d=n(85893),l=function(){return(0,d.jsxs)("div",{className:c().storyContainerPlaceholder,children:[(0,d.jsx)(a.Z,{width:48,height:48,shape:"circle"}),(0,d.jsxs)("div",{className:c().feedDescription,children:[(0,d.jsx)(a.Z,{width:192,height:20}),(0,d.jsx)(a.Z,{width:128,height:20,className:c().datePlaceholder}),(0,d.jsx)(a.Z,{width:384,height:20,className:c().descriptionPlaceholder}),(0,d.jsx)(a.Z,{width:160,height:32,className:c().likeCommentPlaceholder})]})]})};t.Z=function(e){var t=e.length,n=void 0===t?4:t;return(0,d.jsx)("div",{"data-testid":"feed-place-holder",className:c().feedContainerPlaceholder,children:(0,r.Z)(Array(n).keys()).map((function(e){return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(l,{}),e<n-1&&(0,d.jsx)("div",{className:(0,o.default)(c().divider,c().dividerPlaceholder)})]},e)}))})}},7137:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(59499),i=n(4730),o=n(67294),a=n(24070),s=n(70131),c=n(63406),d=n(43846),l=n(42586),u=n(84851),f=n(10074),h=n(67828),m=n(88391),p=n.n(m),v=n(68404),b=n(85893),g=["id","paymentId"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t=e.stories,n=e.feedType,r=e.csrfToken,o=e.onLoadMore,m=e.isError,y=void 0!==m&&m,_=e.isLoading,j=void 0!==_&&_,P=e.hasMore,O=void 0!==P&&P,w=(0,c.$G)(["feed","common"]).t,E=(0,d.R)().logEvent,M=(0,v.oR)().profileStore,k={public:w("common:public-privacy"),friends:w("common:friends-privacy"),private:w("common:private-privacy")};return y?(0,b.jsxs)("div",{"data-testid":"".concat(n,"-feed-error-container"),className:p().message,children:[(0,b.jsx)("div",{className:p().messageTitle,children:w("feed-error-title")}),(0,b.jsx)("div",{children:w("feed-error-message")})]}):0!==t.length||j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{"data-testid":"".concat(n,"-feed-container"),children:t.map((function(e,o){var a=e.id,c=e.paymentId,d=(0,i.Z)(e,g);return(0,b.jsx)(s.df,{children:function(e){var i,s=e.inView,u=e.ref,h=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},m=n;("me"===n||"public"===n?m=h(n):"friend"===n?m=h("".concat(n,"s")):"otherPublic"===n?m="Profile Other User Feed":"betweenYou"===n&&(m="Profile Other User Between You"),s)&&E(l.Iy.FEED_IMPRESSION,{"Feed Type":m,"Date Served":new Date,"Story Type":"P2P","Story ID":a,"Story Index":o,"External ID":null!==(i=null===M||void 0===M?void 0:M.id)&&void 0!==i?i:null,"Transaction ID":null!==c&&void 0!==c?c:""});return(0,b.jsxs)("div",{ref:u,children:[(0,b.jsx)(f.Z,x({id:a,csrfToken:r,audienceLabels:k,shouldOnCommentClickRedirect:!0},d)),t.length!==o+1&&(0,b.jsx)("hr",{className:p().divider})]})}},"".concat(a,"-").concat(o))}))}),j&&(0,b.jsx)(h.Z,{length:0===t.length?4:1}),(0,b.jsx)("div",{className:p().loadMoreContainer,children:O&&!j&&(0,b.jsx)(a.zx,{kind:"secondaryAlt",onClick:o,"aria-label":w("load-more"),children:w("load-more")})})]}):(0,b.jsxs)("div",{"data-testid":"".concat(n,"-feed-empty-container"),className:p().message,children:[(0,b.jsx)("h4",{children:w("empty-".concat(n,"-feed-title"))}),(0,b.jsx)("p",{children:w("empty-".concat(n,"-feed-message"))}),"friend"===n&&(0,b.jsx)(a.zx,{tabIndex:-1,classes:{root:"LinkButtonPrimary"},children:(0,b.jsx)(u.Z,{href:"/friends",children:w("invite-friends")})})]})},j=o.memo(_)},8605:function(e,t,n){"use strict";n.d(t,{N:function(){return d}});var r=n(16835),i=n(67294),o=n(22150),a=n(63406),s=n(11163),c=n(30926),d=function(e,t,n){var d=(0,a.$G)(["common"]).t,l=(0,s.useRouter)(),u=d("common:account-frozen"),f=d("common:account-frozen-description"),h=d("common:account-frozen-description-required"),m=d("common:account-frozen-description-inprogress"),p=d("common:account-frozen-description-exempted"),v=(0,o.rm)(c.d7.ACCOUNT_RECOVERY),b=(0,r.Z)(v,1)[0].enabled,g=b&&("required"===e||"exempted"===e||"in_process"===e);return(0,i.useEffect)((function(){if(b&&n&&t)switch(e){case"in_process":t({titleMessage:u,messageDetails:f,type:"error"});break;case"required":t({titleMessage:u,messageDetails:h,type:"error"});break;case"exempted":t({titleMessage:u,messageDetails:p,type:"error"})}}),[n,b,e,u,f,h,p,t]),{isIndebted:g,isRecoveryFFEnabled:b,checkIndebtedness:function(){return b&&("required"===e&&(l.push("/recover"),!0)||!("in_process"!==e||!t)&&(t({titleMessage:u,messageDetails:m,type:"error"}),!0)||"exempted"===e)}}}},26345:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(27812),i=n(50029),o=n(87794),a=n.n(o),s=n(67294),c=n(63406),d=n(30391),l=n(68404),u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.initialStories,u=n.initialNextId,f=(0,s.useRef)(o?u:""),h=(0,s.useRef)(),m=(0,s.useState)(!1),p=m[0],v=m[1],b=(0,s.useState)(!1),g=b[0],y=b[1],x=(0,s.useState)(o||[]),_=x[0],j=x[1],P=(0,l.oR)(),O=P.toastStore,w=(0,c.$G)(["feed","common"]),E=w.t,M=E("feed:failed-to-load-story-title"),k=E("common:failed-generic");(0,s.useEffect)((function(){return function(){var e;null===(e=h.current)||void 0===e||e.abort()}}),[]),(0,s.useEffect)((function(){return function(){j([]),f.current=""}}),[e,t]);var C=(0,s.useCallback)(function(){var e=(0,i.Z)(a().mark((function e(t,n,i,o){var s,c,l,u,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o?"&nextId=".concat(o):"",e.prev=1,v(!0),y(!1),c=new AbortController,h.current=c,e.next=8,d.O.get("".concat(t,"&externalId=").concat(n).concat(s),{signal:c.signal});case 8:l=e.sent,u=l.nextId,m=l.stories,f.current=u,j((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(m))})),e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(1),"AbortError"!==e.t0.name){e.next=19;break}return e.abrupt("return");case 19:i?O.enqueueToast({titleMessage:M,messageDetails:k,type:"error"}):y(!0);case 20:return e.prev=20,v(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,15,20,23]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),[k,M,O]),N=(0,s.useCallback)((function(){C(t,e,!0,f.current)}),[e,C,t]),S=(0,s.useCallback)((function(){C(t,e,!1)}),[e,C,t]);return(0,s.useEffect)((function(){e&&!o&&S()}),[e,S,o,t]),{isLoading:p,isError:g,stories:_,loadMore:N,fetchFeed:S,hasMore:void 0!==f.current,feedNextId:f.current}}},73639:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return k},I18N_NAMESPACES:function(){return C}});var r=n(59499),i=n(16835),o=n(67294),a=n(11752),s=n(11163),c=n(63406),d=n(24070),l=n(74905),u=n(13482),f=n(2962),h=n(54347),m=n(7137),p=n(91331),v=n.n(p),b=n(68404),g=n(26345),y=n(43846),x=n(42586),_=n(39683),j=n(38615),P=n(77411),O=n(8605),w=n(85893);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=!0,C=["feed","story"],N=function(e,t){return{tabName:t,"aria-label":t,id:"feed-tab-".concat(e),"aria-controls":"feed-tabpanel-".concat(e)}},S=(0,u.Pi)((function(e){var t,n=e.incentives,r=(0,c.$G)("home").t,u=r("incentive-expired"),p=r("incentive-not-yours"),P=r("incentive-invalid-token"),E=r("incentive-already-claimed"),k=r("incentive-processing"),C=r("incentive-flow-disabled"),S=r("incentive-logged-and-will-be-processed-manually"),D=r("incentive-not-found"),I=r("incentive-processing-error"),T=r("incentive-phone-not-verified"),Z=r("home:failed-to-fetch-payment-methods"),A=r("common:failed-generic"),R=r("home:add-fund-title"),F=r("home:verify-bank-title"),L=r("home:verify-bank-choose-account-title"),q=r("home:verify-bank-success-message"),U=r("home:verify-bank-no-accounts"),z=(0,s.useRouter)(),B=null!==(t=(0,a.default)().publicRuntimeConfig.NEXT_PUBLIC_SHABU_HOME_URL)&&void 0!==t?t:"https://venmo.com",G=(0,h.Kx)({feed:(0,h.Wc)(h.Zp,"friends")}),V=(0,i.Z)(G,2),$=V[0].feed,J=V[1],X=(0,b.oR)(),Y=X.profileStore,H=X.csrfToken,K=X.toastStore,Q=X.paymentMethodsStore,W=Q.fetchPaymentMethods,ee=Q.paymentMethods,te=Q.isFetching,ne=(0,y.R)().logEvent,re=(0,o.useMemo)((function(){return{friends:0,mine:1}}),[]),ie=(0,o.useMemo)((function(){return{170100:u,170101:p,170102:P,170103:E,170104:k,170105:C,170106:S,170107:D,170108:I,170109:T}}),[E,u,C,P,S,D,p,T,I,k]),oe=(0,o.useMemo)((function(){if("friends"!==$)return{initialStories:[],initialNextId:""}}),[]),ae=(0,o.useMemo)((function(){if("mine"!==$)return{initialStories:[],initialNextId:""}}),[]),se=(0,o.useState)({path:"",showModal:!1,title:"",src:"",onClose:void 0}),ce=se[0],de=se[1],le=(0,o.useCallback)((function(){z.replace("/"),de((function(e){return M(M({},e),{},{showModal:!1,path:""})}))}),[z]);(0,o.useEffect)((function(){switch(z.asPath){case"/addfunds":de((function(e){return M(M({},e),{},{path:"/addfunds",showModal:!0,title:R,src:"".concat(B,"/webviews#desktop/deposit"),onClose:Y.isIndebted?void 0:le})}));break;case"/verifybank":W({errorTitleMessage:Z,errorMessageDetails:A}),de((function(e){return M(M({},e),{},{path:"/verifybank"})}))}}),[W,le,B,Y.isIndebted,z.asPath,Z,A,R]),(0,o.useEffect)((function(){if("/verifybank"===ce.path&&!te&&ee){var e=ee.filter((function(e){return e.fundingType===j.Ul.Bank})),t=e.length?e.filter((function(e){var t=null===e||void 0===e?void 0:e.metadata;return!(null!==t&&void 0!==t&&t.isVerified)})):[],n=e.length&&t.length,r=1===(null===t||void 0===t?void 0:t.length);if(n){var i,o=null===(i=t[0])||void 0===i?void 0:i.metadata,a=null===o||void 0===o?void 0:o.uniqueIdentifier,s=r?F:L,c="".concat(B).concat(r?"/webviews/bankaccounts/".concat(a,"/verify/micro"):"/webviews/funding");de((function(e){return M(M({},e),{},{showModal:!0,title:s,src:c,onClose:le})}))}else K.enqueueToast({titleMessage:F,messageDetails:e.length?q:U,type:"success"}),de((function(e){return M(M({},e),{},{showModal:!1,path:""})})),z.replace("/")}}),[ee,te,ce.path,B,K,z,le,F,L,q,U]),(0,o.useEffect)((function(){var e,t,r=(null===(e=z.query)||void 0===e?void 0:e.ictv)||(null===n||void 0===n?void 0:n.ictv),i=(null===(t=z.query)||void 0===t?void 0:t.msg)||(null===n||void 0===n?void 0:n.msg);if(r&&i){Array.isArray(r)&&(r=r[0]),Array.isArray(i)&&(i=i[0]);var o,a="",s="success";if("1"===r)a=null!==(o=ie[i])&&void 0!==o?o:k;else if("0"===r){var c;s="error",a=null!==(c=ie[i])&&void 0!==c?c:C}K.enqueueToast({titleMessage:a,messageDetails:"",type:s}),z.replace("/")}}),[n,ie,C,k,z,K]),(0,O.N)(Y.recoveryStatus,K.enqueueToast,!0);var ue=(0,g.A)(Y.id,"/api/stories?feedType=friend",oe),fe=ue.stories,he=ue.isLoading,me=ue.isError,pe=ue.loadMore,ve=ue.feedNextId,be=ue.fetchFeed,ge=ue.hasMore,ye=(0,g.A)(Y.id,"/api/stories?feedType=me",ae),xe=ye.stories,_e=ye.isLoading,je=ye.isError,Pe=ye.loadMore,Oe=ye.feedNextId,we=ye.fetchFeed,Ee=ye.hasMore,Me=(0,o.useCallback)((function(){ne(x.Iy.FEED_FRIENDS_MORE),pe()}),[ne,pe]),ke=(0,o.useCallback)((function(){ne(x.Iy.FEED_ME_MORE),Pe()}),[ne,Pe]);if(!Y.id)return null;var Ce=ce.showModal,Ne=ce.title,Se=ce.src,De=ce.onClose;return(0,w.jsxs)("div",{children:[(0,w.jsx)(f.PB,{title:r("title",{displayName:Y.firstName||Y.displayName})}),(0,w.jsxs)(d.mQ,{value:re[$],className:v().tabContainer,onChange:function(e,t){J({feed:Object.keys(re)[t]}),t!==re.friends||""!==ve||he||be(),t!==re.mine||""!==Oe||_e||we()},tabStyle:"toggle",tabList:[M(M({},N(re.friends,r("tabname-friends"))),{},{tabIcon:(0,w.jsx)(l.Friends,{titleAccess:r("tabname-friends")})}),M(M({},N(re.mine,r("tabname-mine"))),{},{tabIcon:(0,w.jsx)(l.Profile,{titleAccess:r("tabname-mine")})})],children:[(0,w.jsx)(d.x4,{tabSelectorValue:re.friends,id:"feed-tabpanel-".concat(re.friends),children:(0,w.jsx)(m.Z,{stories:fe,feedType:"friend",csrfToken:H,isLoading:he,hasMore:ge,isError:me,onLoadMore:Me})}),(0,w.jsx)(d.x4,{tabSelectorValue:re.mine,id:"feed-tabpanel-".concat(re.mine),children:(0,w.jsx)(m.Z,{stories:xe,feedType:"me",csrfToken:H,isLoading:_e,hasMore:Ee,isError:je,onLoadMore:ke})})]}),(0,w.jsx)(_.Z,{open:Ce,title:Ne,src:Se,onClose:De,onMessageEvent:function(e){e&&e.data&&e.data.type&&e.data.type===x.mZ.ADDFUNDS_SUCCESS&&(de((function(e){return M(M({},e),{},{showModal:!1})})),z.replace("/"))}})]})}));S.getLayout=P.f,t.default=S},45301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(73639)}])},88391:function(e){e.exports={loadMoreContainer:"feed_loadMoreContainer__2TiuA",divider:"feed_divider__BGolp",message:"feed_message__JJ1NF",messageTitle:"feed_messageTitle__DgCmL",feedContainerPlaceholder:"feed_feedContainerPlaceholder__O1aCb",storyContainerPlaceholder:"feed_storyContainerPlaceholder__Bv5x_",feedDescription:"feed_feedDescription__hrus5",datePlaceholder:"feed_datePlaceholder__rlJga",descriptionPlaceholder:"feed_descriptionPlaceholder__17ng0",likeCommentPlaceholder:"feed_likeCommentPlaceholder__GhzvF",dividerPlaceholder:"feed_dividerPlaceholder__bxAUh"}},91331:function(e){e.exports={tabContainer:"homepage_tabContainer__hGBDz"}}},function(e){e.O(0,[8906,9717,2824,8938,74,9774,2888,179],(function(){return t=45301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);